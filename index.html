<script src='sql-debug.js'></script>
<script>
    //Create the database
    var db = new SQL.Database();
    // Run a query without reading the results
    db.run("CREATE TABLE test (col1, col2);");
    // Insert two rows: (1,111) and (2,222)
    db.run("INSERT INTO test VALUES (?,?), (?,?)", [1,111,2,222]);

    // Prepare a statement
    var stmt = db.prepare("SELECT * FROM test WHERE col1 BETWEEN $start AND $end");
    stmt.getAsObject({$start:1, $end:1}); // {col1:1, col2:111}

    // Bind new values
    stmt.bind({$start:1, $end:2});
    while(stmt.step()) { //
        var row = stmt.getAsObject();
        console.log(row);
        // [...] do something with the row of result
    }
</script>
<body>
<!-- Create a simple CodeMirror instance -->
<link rel="stylesheet" href="lib/codemirror.css">
<script src="lib/codemirror.js"></script>
<script>
  function toTable(output){
    console.log(output[0])
    var n = 0;
    var table = document.createElement("TABLE");
    for(i = 0; i < output[n].values.length; i++) {
      var row = table.insertRow(i);
      for(j = 0; j < output[n].values[i].length; j++){
        var cell = row.insertCell(j);
        cell.innerHTML = output[n].values[i][j]
      }
    }
    var header = table.createTHead();
    var row = header.insertRow(0);
    for(i = 0; i < output[n].columns.length; i++) {
      var cell = row.insertCell(i);
      cell.innerHTML = output[n].columns[i];
    }
    document.body.appendChild(table);
  }
  var editor = CodeMirror(document.body, {
    lineNumbers: true,
    mode: "sql"
  });
  var btn = document.createElement("BUTTON");
  btn.innerHTML = 'Run Query';
  document.body.appendChild(btn)
  btn.onclick = () => { toTable(db.exec(editor.getValue())); }
</script>
</body>